version: '3.5'

services:
  allu_database:
    build: ./
    image: allu_database
    container_name: allu-database
    volumes:
      - ./local_development_conf/dev-add-report.sql:/docker-entrypoint-initdb.d/dev-add-report.sql
    environment:
      POSTGRES_PASSWORD: postgres
    ports:
      # <Port exposed> : < PostgreSQL Port running inside container>
      - "5432:5432"
  allu-node:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.17.9
    container_name: allu-elasticsearch
    environment:
      node.name: allu-node
      cluster.name: allu-cluster
      xpack.security.enabled: "false"
      ES_JAVA_OPTS: "-Xms2g -Xmx2g"
      discovery.type: "single-node"
    ports:
      - "9200:9200"
      - "9300:9300"

networks:
  default:
    name: allu-network
    driver: bridge