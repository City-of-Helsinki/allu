<div class="main-content">
    <div class="search-bar">
        <h1>HAKU</h1>
        <form [formGroup]="queryForm">
            <div class="row">
                <div class="col m3">
                    <md-form-field class="input-full-width">
                        <input mdInput type="text" formControlName="ownerName" placeholder="Hankkeen omistaja"/>
                    </md-form-field>
                </div>
                <div class="col m2">
                    <md-form-field class="input-full-width">
                        <input mdInput type="text" formControlName="id" placeholder="Hankkeen tunnus"/>
                    </md-form-field>
                </div>
                <div class="col m2">
                    <md-select formControlName="districts" [multiple]="true" placeholder="Kaupunginosa" class="input-full-width">
                        <md-option *ngFor="let district of districts | async" [value]="district.id">{{district.name}}</md-option>
                    </md-select>
                </div>
                <div class="col m1">
                    <md-form-field class="input-full-width">
                        <input mdInput type="text" formControlName="startTime" placeholder="Alkupvm"
                               [mdDatepicker]="startTimePicker"/>
                        <md-datepicker-toggle mdSuffix [for]="startTimePicker"></md-datepicker-toggle>
                        <md-datepicker #startTimePicker></md-datepicker>
                    </md-form-field>
                </div>
                <div class="col m1">
                    <md-form-field class="input-full-width">
                        <input mdInput type="text" formControlName="endTime" placeholder="Loppupvm"
                               [mdDatepicker]="endTimePicker"/>
                        <md-datepicker-toggle mdSuffix [for]="endTimePicker"></md-datepicker-toggle>
                        <md-datepicker #endTimePicker></md-datepicker>
                    </md-form-field>
                </div>
                <div class="col m3">
                    <md-form-field class="input-full-width">
                        <input mdInput type="text" formControlName="creator" placeholder="Hankkeen lisääjä"/>
                    </md-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col m3">
                    <md-checkbox formControlName="onlyActive">Vain aktiiviset</md-checkbox>
                </div>
            </div>
            <div class="row">
                <div class="col m12 s12">
                    <button (click)="search()" md-raised-button type="button" color="primary">HAE</button>
                </div>
            </div>
        </form>
    </div>
    <div class="row">
        <div class=" col s12">
            <table class="bordered responsive-table">
                <thead>
                <tr>
                    <th>Lisääjä</th>
                    <th sortBy="id" [currentSort]="sort" (onSortChange)="sortBy($event)">Tunnus</th>
                    <th sortBy="ownerName" [currentSort]="sort" (onSortChange)="sortBy($event)">Omistaja</th>
                    <th>Aktiivinen</th>
                    <th>Kaupunginosa</th>
                    <th sortBy="startTime" [currentSort]="sort" (onSortChange)="sortBy($event)">Alku</th>
                    <th sortBy="endTime" [currentSort]="sort" (onSortChange)="sortBy($event)">Loppu</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let project of projects" class="clickable row-highlight"
                    (click)="goToSummary(project)">
                    <td>-</td>
                    <td>{{project.id}}</td>
                    <td>{{project.ownerName}}</td>
                    <td>
                        <span *ngIf="project.active">AKTIIVINEN</span>
                        <span *ngIf="!project.active">INAKTIIVINEN</span>
                    </td>
                    <td>{{districtNames(project.cityDistricts) | async | commaSeparated}}</td>
                    <td>{{project.startTime | date:format}}</td>
                    <td>{{project.endTime | date:format}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
