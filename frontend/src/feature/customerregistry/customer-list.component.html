<div class="main-content">
    <div [formGroup]="searchForm" class="row">
        <div class="col s3">
            <input-box>
                <input inputBoxInput type="text" formControlName="name" placeholder="Asiakkaan nimi"/>
            </input-box>
        </div>
        <div class="col s3">
            <input-box>
                <input inputBoxInput type="text" formControlName="registryKey" placeholder="Asiakkaan tunniste"/>
            </input-box>
        </div>
        <div class="col s2">
            <input-box>
                <select inputBoxInput formControlName="type">
                    <option value="" selected>Asiakkaan tyyppi</option>
                    <option *ngFor="let type of customerTypes" value="{{type}}">
                        {{['customer.type', type, 'name'] | translation}}
                    </option>
                </select>
            </input-box>
        </div>
        <div class="col s3">
            <button md-raised-button type="button" color="primary" (click)="search()">HAE</button>
        </div>
    </div>
    <div class="row" *availableTo="['ROLE_CREATE_APPLICATION', 'ROLE_PROCESS_APPLICATION']">
        <div class="col s12">
            <button md-raised-button type="button" color="primary" (click)="newCustomer()">Lisää uusi asiakas</button>
        </div>
    </div>
    <div class="row" *ngIf="(customers | async)?.length > 0">
        <div class="col s12">
            Hakuehdoilla löytyi {{(customers | async)?.length}} asiakasta
        </div>
    </div>
    <div class="row">
        <div class=" col s12">
            <table class="bordered responsive-table">
                <thead>
                <tr>
                    <th sortBy="name" (onSortChange)="sortBy($event)">Nimi</th>
                    <th>Tyyppi</th>
                    <th>Tunniste</th>
                    <th>Sähköposti</th>
                    <th>Puhelin</th>
                    <th>Osoite</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let customer of customers | async" class="clickable row-highlight" (click)="onSelect(customer)">
                    <td>{{customer.name}}</td>
                    <td>{{['customer.type', customer.type, 'name'] | translation}}</td>
                    <td>{{customer.registryKey}}</td>
                    <td>{{customer.email}}</td>
                    <td>{{customer.phone}}</td>
                    <td>{{customer.postalAddress?.uiAddress}}</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>