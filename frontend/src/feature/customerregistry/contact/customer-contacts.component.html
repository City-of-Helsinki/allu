<div [formGroup]="parentForm">
    <div formArrayName="contacts">
        <ng-container *ngFor="let contact of contacts.controls; let index=index">
            <div class="col m6 loose" *ngIf="contact.value.active">
                <div [formGroupName]="index" class="no-border">
                    <md-card>
                        <md-card-title>Yhteyshenkilö</md-card-title>
                        <md-card-content>
                            <div class="row form-group">
                                <div class="col m6">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="name" placeholder="Yhteyshenkilön nimi*"/>
                                        <md-hint>
                                            <field-error [form]="contact" field="name" hasError="required">{{'contact.field.nameMissing' | translation}}</field-error>
                                        </md-hint>
                                    </md-input-container>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col m6">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="streetAddress" placeholder="Katuosoite"/>
                                    </md-input-container>
                                </div>
                                <div class="col m3">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="postalCode" placeholder="Postinumero"/>
                                        <md-hint>
                                            <field-error [form]="contact" field="postalCode" hasError="pattern">{{'common.field.postalCode' | translation}}</field-error>
                                        </md-hint>
                                    </md-input-container>
                                </div>
                                <div class="col m3">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="city" placeholder="Toimipaikka"/>
                                    </md-input-container>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col m6">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="email" placeholder="Sähköpostiosoite"/>
                                        <md-hint>
                                            <field-error [form]="contact" field="email" hasError="pattern">{{'common.field.emailInvalid' | translation}}</field-error>
                                        </md-hint>
                                    </md-input-container>
                                </div>
                                <div class="col m6">
                                    <md-input-container class="input-full-width">
                                        <input mdInput type="text" formControlName="phone" placeholder="Puhelin"/>
                                        <md-hint>
                                            <field-error [form]="contact" field="phone" hasError="minlength">{{'contact.field.phoneShort' | translation}}</field-error>
                                        </md-hint>
                                    </md-input-container>
                                </div>
                            </div>
                            <div class="row form-group" *availableTo="['ROLE_CREATE_APPLICATION', 'ROLE_PROCESS_APPLICATION']">
                                <div class="col m12">
                                    <button md-raised-button type="button" color="primary" (click)="removeContact(index, contact.value)">POISTA</button>
                                </div>
                            </div>
                        </md-card-content>
                    </md-card>
                </div>
            </div>
        </ng-container>
    </div>
</div>