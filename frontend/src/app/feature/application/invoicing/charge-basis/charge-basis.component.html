<allu-card class="full-width">
  <mat-card-title class="allu-card-title">
    <div fxLayout="row">
      <div fxFlex>
        {{'chargeBasis.title' | translation}}
        <button *ngIf="changesAllowed" type="button" mat-icon-button (click)="newEntry()" class="align-with-text">
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </div>
  </mat-card-title>
  <mat-card-content class="bordered">
    <div fxLayout="row wrap" fxLayout.sm="column" fxLayoutAlign="start center" class="header-row">
      <div fxFlex="none" fxFlexAlign="center">
        <mat-card-subtitle>
          {{'chargeBasis.invoicable' | translation}}
        </mat-card-subtitle>
      </div>
    </div>
    <ul class="charge-basis-entries">
      <li *ngFor="let entry of chargeBasisEntries$ | async; let i=index; trackBy: trackById" class="charge-basis-entry-container">
        <charge-basis-entry
          [entry]="entry"
          [changesAllowed]="changesAllowed"
          (onEdit)="editEntry($event)"
          (onRemove)="removeEntry(entry.id)"
          (invoicableChange)="setInvoicable(entry.id, $event)"></charge-basis-entry>
      </li>
    </ul>
  </mat-card-content>
  <mat-card-footer>
    <div fxLayout="row" fxLayoutAlign="start center">
      <div fxFlex="110px"></div>
      <div fxFlex="15" fxFlexOffset="70" class="text-highlighted">
        {{'common.totalPrice' | translation}}: {{calculatedPrice | centsToEuros}}
      </div>
    </div>
  </mat-card-footer>
</allu-card>
